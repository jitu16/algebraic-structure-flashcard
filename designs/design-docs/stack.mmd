graph TD
    User((User))
    
    subgraph Client ["Client Side (Vite/React)"]
        App["App Controller"]
        
        subgraph Engines ["Graph Engine (React Flow)"]
            StructuralEngine["Algebraic Structural Engine<br/>(Nodes: Axiom Systems)"]
        end
        
        Logic["Lineage Utility<br/>(Fetch Parents)"]
        Math["KaTeX Renderer"]
    end

    subgraph Data ["Firebase"]
        DB_Axioms[("Collection: StructureNodes")]
    end

    %% Flow
    User --> App
    App --"View Map"--> StructuralEngine
    
    StructuralEngine --> Logic
    StructuralEngine --> Math
    
    StructuralEngine <--> DB_Axioms