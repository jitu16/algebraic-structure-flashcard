classDiagram
    class User {
        +String id PK
        +String email
        +String role "Values: admin, contributor, voter"
        +Int creationReputation
        +Int contributorReputation
    }

    class Universe {
        +String id PK
        +String name
        +Array~String~ sets "e.g., ['V', 'F']"
        +Array~String~ operators "e.g., ['+', 'Â·']"
        +Array~String~ rootAxiomIds "Pointers to the Axiom Registry"
    }

    class Axiom {
        +String id PK
        +String canonicalName "e.g., 'Commutativity'"
        +Array~String~ aliases "Tags/Synonyms: ['Abelian', 'Symmetric']"
        +String defaultLatex "e.g., a \cdot b = b \cdot a"
        +String authorId FK
        +Timestamp createdAt
    }
    
    note for Axiom "The 'Concept' Library.\nStores unique definitions."

    class Node {
        +String id PK
        +String parentId FK
        +String authorId FK
        
        +String axiomId FK "LOGIC: Links to the Concept"
        +String displayLatex "VISUAL: The Notation Override"
        
        +String status "Values: unverified, verified, contested, deadEnd, deprecated"
        
        +String duplicateOfId "Pointer to the Survivor Node"
        +Boolean toBeDeleted "Deprecation Flag (Triggers Yellow Flash)"
        
        +Int voteCountGreen
        +Int voteCountBlack
        +Int flagCountYellow
    }

    class Vote {
        +String id PK
        +String nodeId FK
        +String userId FK
        +String type "Values: green, black"
        +Timestamp timestamp
    }
    
    class Flag {
        +String id PK
        +String type "Values: nodeIssue, axiomDuplicate, notationError, duplication"
        
        +String targetNodeId FK "If flagging a Node"
        +String targetAxiomId FK "If flagging an Axiom"
        
        +String reporterId FK
        +String reason "e.g., Notation Divergence or Permutation"
        +String suggestedFixLatex "For Node Typos"
        
        +String duplicateOfId "Points to Master Axiom (Merge) OR Survivor Node"
        
        +String status
    }
    
    class Theorem {
        +String id PK
        +String nodeId FK
        +String statementLatex
        +String proofLatex
    }

    User "1" -- "*" Node : creates
    User "1" -- "*" Axiom : creates
    User "1" -- "*" Vote : casts
    User "1" -- "*" Flag : reports
    
    Axiom "1" -- "*" Node : defines
    Node "1" -- "*" Vote : has
    Node "1" -- "*" Flag : has