classDiagram
    class User {
        +String id PK
        +String email
        +String role "Values: admin, contributor, voter"
        +Int CreationReputation
        +Int ContributorReputation
    }

    class Universe {
        +String id PK
        +String name
        +Array~String~ sets "e.g., ['V', 'F']"
        +Array~String~ operators "e.g., ['+', 'Â·']"
        +Array~String~ RootAxiomIds "Pointers to the Axiom Registry"
    }

    class Axiom {
        +String id PK
        +String CanonicalName "e.g., 'Commutativity'"
        +Array~String~ aliases "Tags/Synonyms: ['Abelian', 'Symmetric']"
        +String DefaultLatex "e.g., a \cdot b = b \cdot a"
        +String AuthorId FK
        +Timestamp CreatedAt
    }
    
    note for Axiom "The 'Concept' Library.\nStores unique definitions."

    class Node {
        +String id PK
        +String ParentId FK
        +String AuthorId FK
        
        +String AxiomId FK "LOGIC: Links to the Concept"
        +String DisplayLatex "VISUAL: The Notation Override"
        
        +String status "Values: unverified, verified, contested, DeadEnd, deprecated"
        
        +String DuplicateOfId "Pointer to the Survivor Node"
        +Boolean ToBeDeleted "Deprecation Flag (Triggers Yellow Flash)"
        
        +Int VoteCountGreen
        +Int VoteCountBlack
        +Int FlagCountYellow
    }

    class Vote {
        +String id PK
        +String NodeId FK
        +String UserId FK
        +String type "Values: green, black"
        +Timestamp timestamp
    }
    
    class Flag {
        +String id PK
        +String type "Values: NodeIssue, AxiomDuplicate, NotationError, duplication"
        
        +String TargetNodeId FK "If flagging a Node"
        +String TargetAxiomId FK "If flagging an Axiom"
        
        +String ReporterId FK
        +String reason "e.g., Notation Divergence or Permutation"
        +String SuggestedFixLatex "For Node Typos"
        
        +String DuplicateOfId "Points to Master Axiom (Merge) OR Survivor Node"
        
        +String status
    }
    
    class Theorem {
        +String id PK
        +String NodeId FK
        +String StatementLatex
        +String ProofLatex
    }

    User "1" -- "*" Node : creates
    User "1" -- "*" Axiom : creates
    User "1" -- "*" Vote : casts
    User "1" -- "*" Flag : reports
    
    Axiom "1" -- "*" Node : defines
    Node "1" -- "*" Vote : has
    Node "1" -- "*" Flag : has